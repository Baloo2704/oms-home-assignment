[pytest]
# 1. Default CLI Options
# -v: Verbose output (shows each test name)
# -ra: Show extra summary info for (r)easons of (a)ll except passed (e.g., skipped, failed)
# --strict-markers: Raise error if you use a marker that isn't defined below (prevents typos)
# --tb=short: Shorter tracebacks (easier to read errors)
addopts = -v -ra --strict-markers --tb=short

# 2. Test Discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 3. Live Logging (See logs in terminal while tests run)
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(message)s (%(filename)s:%(lineno)s)
log_date_format = %Y-%m-%d %H:%M:%S

# 4. Custom Markers (Categorize your tests)
markers =
    api: Integration tests hitting the REST API
    db: Tests that directly query the database
    smoke: Critical path tests (e.g., Create Order)
    negative: Error handling and edge cases
    slow: Tests that might take longer (e.g., timeouts)

# 5. Report Generation (For CI/CD)
junit_family = xunit2